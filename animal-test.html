<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹ä¸€æµ‹ä½ æ˜¯å“ªç§åŠ¨ç‰© - æ€§æ ¼åŠ¨ç‰©æµ‹è¯•</title>
    <meta name="description" content="è¾“å…¥ä½ çš„åå­—ï¼Œæµ‹ä¸€æµ‹ä½ æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼åŸºäºæ€§æ ¼åˆ†æçš„åŠ¨ç‰©äººæ ¼æµ‹è¯•ï¼Œæœ‹å‹åœˆåˆ†äº«ç¥å™¨ã€‚">
    <meta property="og:title" content="æµ‹ä¸€æµ‹ä½ æ˜¯å“ªç§åŠ¨ç‰©">
    <meta property="og:description" content="æˆ‘çš„æµ‹è¯•ç»“æœæ˜¯ã€Œè€è™ã€ï¼Œä½ ä¹Ÿæ¥æµ‹æµ‹å§ï¼">
    <meta property="og:type" content="website">
    <style>
        :root {
            --primary: #ff6b6b;
            --primary-dark: #ee5a5a;
            --bg: #fff5f5;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .subtitle {
            color: #666;
            font-size: 0.9rem;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(255, 107, 107, 0.15);
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        input[type="text"] {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #ffe0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            display: none;
            text-align: center;
        }

        .result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animal-emoji {
            font-size: 5rem;
            margin-bottom: 10px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animal-name {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .animal-desc {
            color: #555;
            line-height: 1.8;
            margin-bottom: 20px;
            padding: 15px;
            background: #fff9f9;
            border-radius: 12px;
        }

        .traits {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .trait {
            background: linear-gradient(135deg, #ffe0e0 0%, #ffcce0 100%);
            color: var(--primary);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .match-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px dashed #ffe0e0;
        }

        .match-title {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }

        .match-animals {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .match-animal {
            text-align: center;
        }

        .match-emoji {
            font-size: 2rem;
        }

        .match-name {
            font-size: 0.8rem;
            color: #666;
        }

        .match-score {
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-secondary {
            flex: 1;
            padding: 12px;
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .history {
            margin-top: 20px;
        }

        .history-title {
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .history-item {
            background: white;
            padding: 10px 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .history-emoji {
            font-size: 1.5rem;
        }

        .history-name {
            flex: 1;
            color: #333;
        }

        .history-date {
            color: #999;
            font-size: 0.75rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #ffe0e0;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .sponsor-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .sponsor-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .sponsor-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¦ æµ‹ä¸€æµ‹ä½ æ˜¯å“ªç§åŠ¨ç‰©</h1>
            <p class="subtitle">è¾“å…¥åå­—ï¼Œå‘ç°ä½ çš„åŠ¨ç‰©äººæ ¼</p>
        </header>

        <div class="card" id="inputCard">
            <div class="input-group">
                <label>ä½ çš„åå­—</label>
                <input type="text" id="nameInput" placeholder="è¾“å…¥ä½ çš„åå­—" maxlength="20">
            </div>
            <button class="btn" id="testBtn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>æ­£åœ¨åˆ†æä½ çš„æ€§æ ¼...</p>
        </div>

        <div class="card result" id="resultCard">
            <div class="animal-emoji" id="animalEmoji">ğŸ¯</div>
            <div class="animal-name" id="animalName">è€è™</div>
            <div class="traits" id="traits"></div>
            <div class="animal-desc" id="animalDesc"></div>
            <div class="match-section">
                <div class="match-title">æœ€é…çš„åŠ¨ç‰©CP</div>
                <div class="match-animals" id="matchAnimals"></div>
            </div>
            <div class="actions">
                <button class="btn-secondary" onclick="downloadCard()">ğŸ“¥ ä¸‹è½½å›¾ç‰‡</button>
                <button class="btn-secondary" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
        </div>

        <div class="history" id="historySection" style="display: none;">
            <div class="history-title">æµ‹è¯•è®°å½•</div>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>

    <div class="sponsor-float">
        <a href="sponsor.html" class="sponsor-btn" target="_blank">â˜• èµåŠ©æ”¯æŒ</a>
    </div>

    <script>
        const animals = [
            {
                emoji: 'ğŸ¯',
                name: 'è€è™',
                traits: ['é¢†è¢–æ°”è´¨', 'å‹‡æ•¢è‡ªä¿¡', 'ç‹¬ç«‹è‡ªå¼º', 'æ‰§è¡ŒåŠ›å¼º'],
                desc: 'ä½ æ˜¯å¤©ç”Ÿçš„é¢†è¢–ï¼è€è™ä»£è¡¨ç€åŠ›é‡å’Œå‹‡æ°”ï¼Œä½ æ€»æ˜¯æ•¢äºæŒ‘æˆ˜å›°éš¾ï¼Œæœ‰å¾ˆå¼ºçš„é¢†å¯¼èƒ½åŠ›ã€‚å–œæ¬¢ç‹¬ç«‹æ€è€ƒï¼Œè¡ŒåŠ¨åŠ›è¶…å¼ºï¼Œæ˜¯æœ‹å‹ä¸­çš„ä¸»å¿ƒéª¨ï¼',
                matches: [
                    { emoji: 'ğŸ¦', name: 'ç‹®å­', score: 95 },
                    { emoji: 'ğŸ¯', name: 'è€è™', score: 85 },
                    { emoji: 'ğŸº', name: 'ç‹¼', score: 80 }
                ]
            },
            {
                emoji: 'ğŸ¦',
                name: 'ç‹®å­',
                traits: ['è‡ªä¿¡æ»¡æ»¡', 'çƒ­æƒ…å¤§æ–¹', 'æ…·æ…¨ä»—ä¹‰', 'ä¿æŠ¤æ¬²å¼º'],
                desc: 'ä½ æ˜¯äººç¾¤ä¸­çš„ç„¦ç‚¹ï¼ç‹®å­æ˜¯ä¸‡å…½ä¹‹ç‹ï¼Œä½ æœ‰ç€ä¸ç”Ÿä¿±æ¥çš„é­…åŠ›å’Œè‡ªä¿¡ã€‚å–œæ¬¢ç…§é¡¾æœ‹å‹ï¼Œä¸ºäººä»—ä¹‰ï¼Œæ˜¯æœ‹å‹åœˆé‡Œçš„å¤§å“¥/å¤§å§å¤§ï¼',
                matches: [
                    { emoji: 'ğŸ¯', name: 'è€è™', score: 95 },
                    { emoji: 'ğŸ¦Š', name: 'ç‹ç‹¸', score: 88 },
                    { emoji: 'ğŸ»', name: 'ç†Š', score: 82 }
                ]
            },
            {
                emoji: 'ğŸ»',
                name: 'ç†Š',
                traits: ['ç¨³é‡å¯é ', 'æ¸©æŸ”ä½“è´´', 'åŠ¡å®è¸å®', 'å®‰å…¨æ„Ÿ'],
                desc: 'ä½ æ˜¯æœ€å¯é çš„æœ‹å‹ï¼ç†Šä»£è¡¨ç€ç¨³å®šå’ŒåŠ›é‡ï¼Œä½ åšäº‹ç¨³é‡è¸å®ï¼Œè®©äººå¾ˆæœ‰å®‰å…¨æ„Ÿã€‚å¤–è¡¨å¯èƒ½æœ‰ç‚¹ä¸¥è‚ƒï¼Œä½†å†…å¿ƒå…¶å®å¾ˆæ¸©æŸ”å“¦ï¼',
                matches: [
                    { emoji: 'ğŸ°', name: 'å…”å­', score: 92 },
                    { emoji: 'ğŸ¦', name: 'ç‹®å­', score: 82 },
                    { emoji: 'ğŸ¼', name: 'ç†ŠçŒ«', score: 90 }
                ]
            },
            {
                emoji: 'ğŸº',
                name: 'ç‹¼',
                traits: ['å¿ è¯šæŠ¤ç¾¤', 'æ™ºæ…§æ•é”', 'é€‚åº”åŠ›å¼º', 'å›¢é˜Ÿåä½œ'],
                desc: 'ä½ æ˜¯çœŸæ­£çš„å›¢é˜Ÿç©å®¶ï¼ç‹¼æ˜¯ç¾¤å±…åŠ¨ç‰©ï¼Œä½ éå¸¸é‡è§†å‹æƒ…å’Œå®¶åº­ã€‚å¤´è„‘èªæ˜ï¼Œé€‚åº”èƒ½åŠ›è¶…å¼ºï¼Œåœ¨å›¢é˜Ÿä¸­æ€»æ˜¯èƒ½å‘æŒ¥é‡è¦ä½œç”¨ï¼',
                matches: [
                    { emoji: 'ğŸ¦Š', name: 'ç‹ç‹¸', score: 88 },
                    { emoji: 'ğŸ¯', name: 'è€è™', score: 80 },
                    { emoji: 'ğŸº', name: 'ç‹¼', score: 85 }
                ]
            },
            {
                emoji: 'ğŸ¦Š',
                name: 'ç‹ç‹¸',
                traits: ['èªæ˜æœºæ™º', 'çµæ´»å¤šå˜', 'å¹½é»˜é£è¶£', 'æ´å¯ŸåŠ›å¼º'],
                desc: 'ä½ æ˜¯æœ€èªæ˜çš„é‚£ä¸€ä¸ªï¼ç‹ç‹¸ä»£è¡¨ç€æ™ºæ…§å’Œçµæ´»ï¼Œä½ å¤´è„‘çµæ´»ï¼Œååº”å¿«ï¼Œæ€»æ˜¯èƒ½åœ¨å›°å¢ƒä¸­æ‰¾åˆ°å‡ºè·¯ã€‚å¹½é»˜æ„Ÿåè¶³ï¼Œæ˜¯æœ‹å‹åœˆçš„å¼€å¿ƒæœï¼',
                matches: [
                    { emoji: 'ğŸ°', name: 'å…”å­', score: 90 },
                    { emoji: 'ğŸº', name: 'ç‹¼', score: 88 },
                    { emoji: 'ğŸ¦', name: 'ç‹®å­', score: 88 }
                ]
            },
            {
                emoji: 'ğŸ°',
                name: 'å…”å­',
                traits: ['æ¸©æŸ”å¯çˆ±', 'å–„è‰¯çº¯çœŸ', 'æ•æ„Ÿç»†è…»', 'å–„è§£äººæ„'],
                desc: 'ä½ æ˜¯æœ€æ¸©æš–çš„å­˜åœ¨ï¼å…”å­ä»£è¡¨ç€å–„è‰¯å’Œçº¯çœŸï¼Œä½ æ¸©æŸ”ä½“è´´ï¼Œå–„è§£äººæ„ï¼Œæ€»æ˜¯èƒ½æ³¨æ„åˆ°æœ‹å‹çš„å°æƒ…ç»ªã€‚å¤–è¡¨å¯çˆ±ï¼Œå†…å¿ƒåšå¼ºï¼',
                matches: [
                    { emoji: 'ğŸ»', name: 'ç†Š', score: 92 },
                    { emoji: 'ğŸ¦Š', name: 'ç‹ç‹¸', score: 90 },
                    { emoji: 'ğŸ¼', name: 'ç†ŠçŒ«', score: 88 }
                ]
            },
            {
                emoji: 'ğŸ¼',
                name: 'ç†ŠçŒ«',
                traits: ['å‘†èŒå¯çˆ±', 'ä¸ä¸–æ— äº‰', 'æ‚ ç„¶è‡ªå¾—', 'ä½›ç³»ç”Ÿæ´»'],
                desc: 'ä½ æ˜¯æœ€èŒçš„å›½å®ï¼ç†ŠçŒ«ä»£è¡¨ç€peace and loveï¼Œä½ æ€§æ ¼æ¸©å’Œï¼Œä¸ä¸–æ— äº‰ï¼Œæ´»å¾—è½»æ¾è‡ªåœ¨ã€‚è™½ç„¶çœ‹èµ·æ¥å‘†èŒï¼Œå…¶å®å¾ˆæœ‰å†…æ¶µï¼',
                matches: [
                    { emoji: 'ğŸ»', name: 'ç†Š', score: 90 },
                    { emoji: 'ğŸ°', name: 'å…”å­', score: 88 },
                    { emoji: 'ğŸ¨', name: 'è€ƒæ‹‰', score: 92 }
                ]
            },
            {
                emoji: 'ğŸ¨',
                name: 'è€ƒæ‹‰',
                traits: ['æ…¢ç”Ÿæ´»', 'é‡æ„Ÿæƒ…', 'æ¸©æŸ”æ‚ é—²', 'çŸ¥è¶³å¸¸ä¹'],
                desc: 'ä½ æ˜¯æœ€æ‡‚å¾—ç”Ÿæ´»çš„äººï¼è€ƒæ‹‰ä»£è¡¨ç€æ‚ é—²å’ŒçŸ¥è¶³ï¼Œä½ ä¸å–œæ¬¢äº‰æŠ¢ï¼Œäº«å—å½“ä¸‹çš„ç¾å¥½ã€‚æ€§æ ¼æ¸©æŸ”ï¼Œå’Œä½ åœ¨ä¸€èµ·å¾ˆèˆ’æœï¼',
                matches: [
                    { emoji: 'ğŸ¼', name: 'ç†ŠçŒ«', score: 92 },
                    { emoji: 'ğŸ°', name: 'å…”å­', score: 85 },
                    { emoji: 'ğŸ¦¥', name: 'æ ‘æ‡’', score: 90 }
                ]
            },
            {
                emoji: 'ğŸ¦„',
                name: 'ç‹¬è§’å…½',
                traits: ['æ¢¦å¹»æµªæ¼«', 'ç‹¬ç‰¹é­…åŠ›', 'æƒ³è±¡åŠ›ä¸°å¯Œ', 'è¿½æ±‚ç†æƒ³'],
                desc: 'ä½ æ˜¯æœ€ç‰¹åˆ«çš„å­˜åœ¨ï¼ç‹¬è§’å…½ä»£è¡¨ç€æ¢¦æƒ³å’Œç‹¬ç‰¹ï¼Œä½ æœ‰ç€ä¸°å¯Œçš„æƒ³è±¡åŠ›ï¼Œæ€»æ˜¯å¯¹ç”Ÿæ´»å……æ»¡æœŸå¾…ã€‚ç›¸ä¿¡å¥‡è¿¹ï¼Œæ°¸è¿œä¿æŒå°‘å¥³å¿ƒï¼',
                matches: [
                    { emoji: 'ğŸ¦‹', name: 'è´è¶', score: 95 },
                    { emoji: 'ğŸ¦„', name: 'ç‹¬è§’å…½', score: 90 },
                    { emoji: 'ğŸŒˆ', name: 'å½©è™¹', score: 88 }
                ]
            },
            {
                emoji: 'ğŸ¦‹',
                name: 'è´è¶',
                traits: ['è‡ªç”±ç¾ä¸½', 'è¿½æ±‚å˜åŒ–', 'é­…åŠ›å››å°„', 'ç ´èŒ§æˆè¶'],
                desc: 'ä½ æ˜¯æœ€ç¾çš„é£æ™¯ï¼è´è¶ä»£è¡¨ç€è‡ªç”±å’Œç¾ä¸½ï¼Œä½ å–œæ¬¢å˜åŒ–ï¼Œè¿½æ±‚è‡ªæˆ‘çªç ´ã€‚ç»å†äº†èœ•å˜ä¼šæ›´åŠ ç¾ä¸½ï¼Œä½ çš„äººç”Ÿæ­£åœ¨ç»½æ”¾ï¼',
                matches: [
                    { emoji: 'ğŸ¦„', name: 'ç‹¬è§’å…½', score: 95 },
                    { emoji: 'ğŸ', name: 'èœœèœ‚', score: 85 },
                    { emoji: 'ğŸŒ¸', name: 'æ¨±èŠ±', score: 88 }
                ]
            },
            {
                emoji: 'ğŸ',
                name: 'èœœèœ‚',
                traits: ['å‹¤åŠ³è®¤çœŸ', 'å›¢é˜Ÿæ„è¯†', "ä¸€ä¸ä¸è‹Ÿ", 'é»˜é»˜ä»˜å‡º'],
                desc: 'ä½ æ˜¯æœ€å‹¤åŠ³çš„å°èœœèœ‚ï¼èœœèœ‚ä»£è¡¨ç€å‹¤å¥‹å’Œå¥‰çŒ®ï¼Œä½ åšäº‹è®¤çœŸè´Ÿè´£ï¼Œéå¸¸é‡è§†å›¢é˜Ÿåˆä½œã€‚é»˜é»˜åŠªåŠ›ï¼Œç»ˆå°†æ”¶è·ç”œèœœçš„æœå®ï¼',
                matches: [
                    { emoji: 'ğŸ»', name: 'ç†Š', score: 85 },
                    { emoji: 'ğŸ', name: 'èœœèœ‚', score: 90 },
                    { emoji: 'ğŸœ', name: 'èš‚èš', score: 88 }
                ]
            },
            {
                emoji: 'ğŸ¢',
                name: 'ä¹Œé¾Ÿ',
                traits: ['ç¨³æ‰ç¨³æ‰“', 'é•¿å¯¿æ™ºæ…§', 'åšæŒä¸æ‡ˆ', 'æ·¡æ³Šååˆ©'],
                desc: 'ä½ æ˜¯æœ€æ·±è—ä¸éœ²çš„æ™ºè€…ï¼ä¹Œé¾Ÿä»£è¡¨ç€é•¿å¯¿å’Œæ™ºæ…§ï¼Œä½ ä¸è¿½æ±‚é€Ÿåº¦ï¼Œè€Œæ˜¯æ³¨é‡è´¨é‡å’Œç§¯ç´¯ã€‚æ…¢å·¥å‡ºç»†æ´»ï¼Œä½ çš„äººç”Ÿåšé‡è€Œç²¾å½©ï¼',
                matches: [
                    { emoji: 'ğŸ°', name: 'å…”å­', score: 82 },
                    { emoji: 'ğŸ¼', name: 'ç†ŠçŒ«', score: 85 },
                    { emoji: 'ğŸ¦', name: 'èœ¥èœ´', score: 80 }
                ]
            }
        ];

        let currentResult = null;

        function getAnimalByName(name) {
            let hash = 0;
            for (let i = 0; i < name.length; i++) {
                hash = name.charCodeAt(i) + ((hash << 5) - hash);
            }
            const index = Math.abs(hash) % animals.length;
            return animals[index];
        }

        function getTodayKey(name) {
            const today = new Date().toISOString().split('T')[0];
            return `animal_${name}_${today}`;
        }

        function startTest() {
            const name = document.getElementById('nameInput').value.trim();
            if (!name) {
                alert('è¯·è¾“å…¥ä½ çš„åå­—ï¼');
                return;
            }

            const btn = document.getElementById('testBtn');
            btn.disabled = true;
            btn.textContent = 'æµ‹è¯•ä¸­...';

            // Check if already tested today
            const todayKey = getTodayKey(name);
            const savedResult = localStorage.getItem(todayKey);

            setTimeout(() => {
                let result;
                if (savedResult) {
                    result = JSON.parse(savedResult);
                } else {
                    result = getAnimalByName(name);
                    localStorage.setItem(todayKey, JSON.stringify(result));

                    // Save to history
                    const history = JSON.parse(localStorage.getItem('animalHistory') || '[]');
                    const historyKey = `animal_${name}_${Date.now()}`;
                    history.unshift({ name, result, date: new Date().toISOString(), key: historyKey });
                    if (history.length > 10) history.pop();
                    localStorage.setItem('animalHistory', JSON.stringify(history));
                }

                showResult(result);
                btn.disabled = false;
                btn.textContent = 'å¼€å§‹æµ‹è¯•';
            }, 1500);
        }

        function showResult(result) {
            currentResult = result;

            document.getElementById('inputCard').style.display = 'none';
            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultCard').classList.add('show');

            document.getElementById('animalEmoji').textContent = result.emoji;
            document.getElementById('animalName').textContent = result.name;
            document.getElementById('animalDesc').textContent = result.desc;

            // Traits
            const traitsHtml = result.traits.map(t => `<span class="trait">${t}</span>`).join('');
            document.getElementById('traits').innerHTML = traitsHtml;

            // Matches
            const matchesHtml = result.matches.map(m => `
                <div class="match-animal">
                    <div class="match-emoji">${m.emoji}</div>
                    <div class="match-name">${m.name}</div>
                    <div class="match-score">${m.score}%</div>
                </div>
            `).join('');
            document.getElementById('matchAnimals').innerHTML = matchesHtml;

            // Show history
            showHistory();
        }

        function showHistory() {
            const history = JSON.parse(localStorage.getItem('animalHistory') || '[]');
            if (history.length === 0) return;

            document.getElementById('historySection').style.display = 'block';

            const historyHtml = history.map(h => `
                <div class="history-item" onclick="document.getElementById('nameInput').value='${h.name}';startTest();">
                    <span class="history-emoji">${h.result.emoji}</span>
                    <span class="history-name">${h.name}</span>
                    <span class="history-date">${new Date(h.date).toLocaleDateString()}</span>
                </div>
            `).join('');

            document.getElementById('historyList').innerHTML = historyHtml;
        }

        function downloadCard() {
            alert('å›¾ç‰‡ä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­æ•¬è¯·æœŸå¾…ï¼');
        }

        function copyToClipboard() {
            if (!currentResult) return;

            const text = `ğŸ¦ æµ‹ä¸€æµ‹æˆ‘æ˜¯å“ªç§åŠ¨ç‰©\næˆ‘çš„ç»“æœæ˜¯ï¼š${currentResult.emoji} ${currentResult.name}\n${currentResult.desc}\nå¿«æ¥æµ‹è¯•ä½ çš„åŠ¨ç‰©äººæ ¼å§ï¼`;

            navigator.clipboard.writeText(text).then(() => {
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(() => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }

        // Enter key support
        document.getElementById('nameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startTest();
            }
        });
    </script>
</body>
</html>
