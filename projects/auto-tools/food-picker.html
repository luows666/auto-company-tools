<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šå¤©åƒä»€ä¹ˆ - éšæœºç¾é£Ÿé€‰æ‹©å™¨</title>
    <meta name="description" content="çº ç»“ä»Šå¤©åƒä»€ä¹ˆï¼Ÿè®©éšæœºç¾é£Ÿé€‰æ‹©å™¨å¸®ä½ åšå†³å®šï¼æ”¯æŒå¤šç§ç¾é£Ÿåˆ†ç±»ï¼Œä¸€é”®ç”Ÿæˆä»Šæ—¥é£Ÿè°±ã€‚">
    <meta property="og:title" content="ä»Šå¤©åƒä»€ä¹ˆ - éšæœºç¾é£Ÿé€‰æ‹©å™¨">
    <meta property="og:description" content="çº ç»“ä»Šå¤©åƒä»€ä¹ˆï¼Ÿè®©éšæœºç¾é£Ÿé€‰æ‹©å™¨å¸®ä½ åšå†³å®šï¼">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Noto Sans SC', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }
        .food-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            transition: all 0.5s ease;
            box-shadow: 0 10px 40px rgba(245, 87, 108, 0.3);
        }
        .food-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(245, 87, 108, 0.4);
        }
        .spin-btn {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            border: none;
            padding: 16px 48px;
            font-size: 18px;
            font-weight: 700;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 30px rgba(250, 112, 154, 0.4);
        }
        .spin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(250, 112, 154, 0.5);
        }
        .spin-btn:active {
            transform: translateY(0);
        }
        .category-btn {
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .category-btn.active {
            border-color: currentColor;
            background: rgba(255, 255, 255, 0.2);
        }
        .category-btn.chinese { background: #ff6b6b; color: white; }
        .category-btn.western { background: #4ecdc4; color: white; }
        .category-btn.japanese { background: #ffe66d; color: #333; }
        .category-btn.fastfood { background: #95e1d3; color: #333; }
        .category-btn.snacks { background: #dda0dd; color: white; }
        .category-btn.dessert { background: #ffb6c1; color: #333; }
        .category-btn.all { background: #667eea; color: white; }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        .shaking {
            animation: shake 0.5s ease-in-out infinite;
        }
        .emoji-food {
            font-size: 80px;
            display: block;
            margin-bottom: 10px;
        }
        .background-option {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        .background-option:hover {
            transform: scale(1.1);
        }
        .background-option.selected {
            border-color: #333;
            transform: scale(1.1);
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="glass w-full max-w-lg p-8">
        <h1 class="text-3xl font-bold text-center mb-2 text-gray-800">ğŸ½ï¸ ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ</h1>
        <p class="text-center text-gray-500 mb-6">é€‰æ‹©å›°éš¾ç—‡ç¦éŸ³ï¼Œä¸€é”®å¸®ä½ åšå†³å®šï¼</p>

        <!-- æ˜µç§°è¾“å…¥ -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">ä½ çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰</label>
            <input type="text" id="nickname" placeholder="è¾“å…¥æ˜µç§°"
                class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition">
        </div>

        <!-- ç¾é£Ÿåˆ†ç±» -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-3">é€‰æ‹©ç¾é£Ÿåˆ†ç±»</label>
            <div class="flex flex-wrap gap-2">
                <button class="category-btn all active" data-category="all">å…¨éƒ¨</button>
                <button class="category-btn chinese" data-category="chinese">ä¸­é¤</button>
                <button class="category-btn western" data-category="western">è¥¿é¤</button>
                <button class="category-btn japanese" data-category="japanese">æ—¥æ–™</button>
                <button class="category-btn fastfood" data-category="fastfood">å¿«é¤</button>
                <button class="category-btn snacks" data-category="snacks">å°åƒ</button>
                <button class="category-btn dessert" data-category="dessert">ç”œå“</button>
            </div>
        </div>

        <!-- èƒŒæ™¯é£æ ¼ -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-3">é€‰æ‹©å¡ç‰‡é£æ ¼</label>
            <div class="flex flex-wrap gap-2" id="bgOptions">
                <div class="background-option selected" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)" data-bg="0"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)" data-bg="1"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)" data-bg="2"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)" data-bg="3"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)" data-bg="4"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #fa709a 0%, #f5576c 100%)" data-bg="5"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)" data-bg="6"></div>
                <div class="background-option" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)" data-bg="7"></div>
            </div>
        </div>

        <!-- æŠ½å–æŒ‰é’® -->
        <button class="spin-btn w-full mb-6" onclick="spinFood()">
            ğŸ² å¸®æˆ‘é€‰ä¸€ä¸ªï¼
        </button>

        <!-- ç»“æœå±•ç¤º -->
        <div id="result" class="food-card hidden mb-6">
            <span class="emoji-food" id="foodEmoji">ğŸœ</span>
            <h2 class="text-3xl font-bold text-white mb-2" id="foodName">ç‰›è‚‰é¢</h2>
            <p class="text-white/80 text-lg" id="foodCategory">ä¸­é¤</p>
            <p class="text-white/60 text-sm mt-2" id="recommendation">ä»Šå¤©å°±åƒè¿™ä¸ªï¼Œä¸ä¼šé”™çš„ï¼</p>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div id="actions" class="hidden flex gap-3 mb-6">
            <button onclick="downloadCard()" class="flex-1 bg-white border-2 border-purple-500 text-purple-500 py-3 rounded-xl font-semibold hover:bg-purple-50 transition">
                ğŸ“¥ ä¸‹è½½å›¾ç‰‡
            </button>
            <button onclick="copyToClipboard()" class="flex-1 bg-white border-2 border-purple-500 text-purple-500 py-3 rounded-xl font-semibold hover:bg-purple-50 transition">
                ğŸ“‹ å¤åˆ¶åˆ†äº«
            </button>
        </div>

        <!-- è¿”å›ä¸»é¡µ -->
        <div class="text-center">
            <a href="index.html" class="text-gray-500 hover:text-purple-500 transition">â† è¿”å›å·¥å…·ç®±</a>
        </div>
    </div>

    <!-- éšè—çš„ canvas ç”¨äºç”Ÿæˆå›¾ç‰‡ -->
    <canvas id="canvas" style="display:none"></canvas>

    <script>
        // ç¾é£Ÿæ•°æ®
        const foodData = {
            chinese: [
                { name: 'ç‰›è‚‰é¢', emoji: 'ğŸœ', recommendation: 'çƒ­æ°”è…¾è…¾çš„ç‰›è‚‰é¢ï¼Œæš–èƒƒåˆæš–å¿ƒï¼' },
                { name: 'å®«ä¿é¸¡ä¸', emoji: 'ğŸ—', recommendation: 'ç»å…¸å·èœï¼Œéº»è¾£é²œé¦™ï¼' },
                { name: 'çº¢çƒ§è‚‰', emoji: 'ğŸ¥©', recommendation: 'è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–ï¼' },
                { name: 'é±¼é¦™è‚‰ä¸', emoji: 'ğŸ¥¢', recommendation: 'é…¸ç”œå¯å£ï¼Œä¸‹é¥­ç¥å™¨ï¼' },
                { name: 'è›‹ç‚’é¥­', emoji: 'ğŸ³', recommendation: 'ç®€å•å´ä¸ç®€å•ï¼' },
                { name: 'éº»è¾£çƒ«', emoji: 'ğŸ¥˜', recommendation: 'ä¸‡ç‰©çš†å¯çƒ«ï¼Œè¶…çº§æ»¡è¶³ï¼' },
                { name: 'ç«é”…', emoji: 'ğŸ²', recommendation: 'æ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸€é¡¿ç«é”…è§£å†³ä¸äº†çš„ï¼' },
                { name: 'çƒ¤é¸­', emoji: 'ğŸ¦†', recommendation: 'çš®è„†è‚‰å«©ï¼Œäº¬å‘³ç»å…¸ï¼' },
                { name: 'å°ç¬¼åŒ…', emoji: 'ğŸ¥Ÿ', recommendation: 'çš®è–„é¦…å¤§ï¼Œæ±¤æ±æµ“éƒï¼' },
                { name: 'ç‚’æ²³ç²‰', emoji: 'ğŸ', recommendation: 'é”…æ°”åè¶³ï¼Œç²¤å¼é£å‘³ï¼' },
                { name: 'é…¸èœé±¼', emoji: 'ğŸŸ', recommendation: 'é…¸è¾£å¼€èƒƒï¼Œè¶…å¥½åƒï¼' },
                { name: 'è‘±æ²¹æ‹Œé¢', emoji: 'ğŸœ', recommendation: 'ç®€å•ç¾å‘³ï¼Œç«¥å¹´å‘³é“ï¼' },
            ],
            western: [
                { name: 'æ±‰å ¡', emoji: 'ğŸ”', recommendation: 'ç»å…¸ç¾å¼é£å‘³ï¼' },
                { name: 'æŠ«è¨', emoji: 'ğŸ•', recommendation: 'æ‹‰ä¸çš„è¯±æƒ‘ï¼' },
                { name: 'ç‰›æ’', emoji: 'ğŸ¥©', recommendation: 'ä¸ƒåˆ†ç†Ÿåˆšåˆšå¥½ï¼' },
                { name: 'æ„é¢', emoji: 'ğŸ', recommendation: 'ç•ªèŒ„è‚‰é…±yydsï¼' },
                { name: 'æ²™æ‹‰', emoji: 'ğŸ¥—', recommendation: 'å¥åº·åˆæ¸…çˆ½ï¼' },
                { name: 'ä¸‰æ˜æ²»', emoji: 'ğŸ¥ª', recommendation: 'ç®€å•å´ä¸°å¯Œï¼' },
                { name: 'ç‚¸é¸¡', emoji: 'ğŸ—', recommendation: 'å¤–é…¥é‡Œå«©ï¼Œå¤ªé¦™äº†ï¼' },
                { name: 'è–¯æ¡', emoji: 'ğŸŸ', recommendation: 'å¿«ä¹è‚¥å®…æ ‡é…ï¼' },
            ],
            japanese: [
                { name: 'å¯¿å¸', emoji: 'ğŸ£', recommendation: 'æ–°é²œç¾å‘³ï¼' },
                { name: 'æ‹‰é¢', emoji: 'ğŸœ', recommendation: 'æµ“éƒæ±¤åº•ï¼Œè¶…æ»¡è¶³ï¼' },
                { name: 'åˆºèº«', emoji: 'ğŸ¥', recommendation: 'æè‡´æ–°é²œï¼' },
                { name: 'å¤©å¦‡ç½—', emoji: 'ğŸ¤', recommendation: 'é…¥è„†å¯å£ï¼' },
                { name: 'ç…§çƒ§é¥­', emoji: 'ğŸš', recommendation: 'ç”œå’¸é€‚ä¸­ï¼' },
                { name: 'å¯¿å–œçƒ§', emoji: 'ğŸ¥˜', recommendation: 'å…³è¥¿é£å‘³ï¼' },
                { name: 'å’–å–±é¥­', emoji: 'ğŸ›', recommendation: 'æµ“éƒé†‡åšï¼' },
            ],
            fastfood: [
                { name: 'ç‚¸é¸¡æ’', emoji: 'ğŸ—', recommendation: 'é¦™è„†å¤šæ±ï¼' },
                { name: 'è‚‰å¤¹é¦', emoji: 'ğŸ¥™', recommendation: 'ä¸­å¼æ±‰å ¡ï¼Œç»äº†ï¼' },
                { name: 'ç…é¥¼æœå­', emoji: 'ğŸ¥', recommendation: 'å¤©æ´¥ç»å…¸ï¼' },
                { name: 'é¸¡è›‹çŒé¥¼', emoji: 'ğŸ¥š', recommendation: 'æ—©é¤é¦–é€‰ï¼' },
                { name: 'è‚ ç²‰', emoji: 'ğŸ¥Ÿ', recommendation: 'å¹¿å¼æ—©èŒ¶å¿…ç‚¹ï¼' },
                { name: 'æ‰‹æŠ“é¥¼', emoji: 'ğŸ«“', recommendation: 'é…¥è„†æ‰æ¸£ï¼' },
            ],
            snacks: [
                { name: 'çƒ¤ä¸²', emoji: 'ğŸ¡', recommendation: 'å¤œå®µä¹‹ç‹ï¼' },
                { name: 'è‡­è±†è…', emoji: 'ğŸ³', recommendation: 'é—»ç€è‡­åƒç€é¦™ï¼' },
                { name: 'ç…é¥¼', emoji: 'ğŸ¥', recommendation: 'ä¸‡ç‰©çš†å¯å·ï¼' },
                { name: 'å¥¶èŒ¶', emoji: 'ğŸ§‹', recommendation: 'å¿«ä¹è‚¥å®…æ°´ï¼' },
                { name: 'ç‚¸ä¸²', emoji: 'ğŸ¢', recommendation: 'ç§ç±»ç¹å¤šï¼' },
                { name: 'å‡‰çš®', emoji: 'ğŸ¥—', recommendation: 'æ¸…çˆ½è§£æš‘ï¼' },
                { name: 'èºè›³ç²‰', emoji: 'ğŸœ', recommendation: 'é…¸è¾£ä¸Šå¤´ï¼' },
            ],
            dessert: [
                { name: 'è›‹ç³•', emoji: 'ğŸ°', recommendation: 'ç”œèœœæš´å‡»ï¼' },
                { name: 'å†°æ·‡æ·‹', emoji: 'ğŸ¦', recommendation: 'å†°å‡‰è§£æš‘ï¼' },
                { name: 'å¥¶èŒ¶', emoji: 'ğŸ§‹', recommendation: 'å¿«ä¹æºæ³‰ï¼' },
                { name: 'æ°´æœæ', emoji: 'ğŸ“', recommendation: 'å¥åº·ç¾å‘³ï¼' },
                { name: 'æ³¡èŠ™', emoji: 'ğŸ©', recommendation: 'é…¥è½¯é¦™ç”œï¼' },
                { name: 'èŠå£«è›‹ç³•', emoji: 'ğŸ§€', recommendation: 'æµ“éƒå¥¶é¦™ï¼' },
                { name: 'é›ªåªšå¨˜', emoji: 'ğŸ¡', recommendation: 'è½¯ç³¯Qå¼¹ï¼' },
            ]
        };

        // èƒŒæ™¯æ¸å˜
        const backgrounds = [
            'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
            'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
            'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
            'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
            'linear-gradient(135deg, #fa709a 0%, #f5576c 100%)',
            'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
            'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
        ];

        const categoryNames = {
            chinese: 'ä¸­é¤',
            western: 'è¥¿é¤',
            japanese: 'æ—¥æ–™',
            fastfood: 'å¿«é¤',
            snacks: 'å°åƒ',
            dessert: 'ç”œå“'
        };

        let selectedCategory = 'all';
        let selectedBg = 0;
        let currentFood = null;

        // åˆ†ç±»æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedCategory = btn.dataset.category;
            });
        });

        // èƒŒæ™¯é€‰æ‹©äº‹ä»¶
        document.querySelectorAll('.background-option').forEach(opt => {
            opt.addEventListener('click', () => {
                document.querySelectorAll('.background-option').forEach(o => o.classList.remove('selected'));
                opt.classList.add('selected');
                selectedBg = parseInt(opt.dataset.bg);
            });
        });

        // æŠ½å–ç¾é£Ÿ
        function spinFood() {
            const result = document.getElementById('result');
            const actions = document.getElementById('actions');

            result.classList.remove('hidden');
            result.classList.add('shaking');

            // è·å–é€‰ä¸­åˆ†ç±»çš„ç¾é£Ÿ
            let foods = [];
            if (selectedCategory === 'all') {
                Object.values(foodData).forEach(cat => foods.push(...cat));
            } else {
                foods = foodData[selectedCategory] || [];
            }

            // éšæœºåŠ¨ç”»æ•ˆæœ
            let times = 0;
            const maxTimes = 15;
            const interval = setInterval(() => {
                const randomFood = foods[Math.floor(Math.random() * foods.length)];
                document.getElementById('foodEmoji').textContent = randomFood.emoji;
                document.getElementById('foodName').textContent = randomFood.name;
                times++;

                if (times >= maxTimes) {
                    clearInterval(interval);
                    result.classList.remove('shaking');

                    // æœ€ç»ˆé€‰æ‹©
                    currentFood = foods[Math.floor(Math.random() * foods.length)];
                    document.getElementById('foodEmoji').textContent = currentFood.emoji;
                    document.getElementById('foodName').textContent = currentFood.name;
                    document.getElementById('foodCategory').textContent = categoryNames[selectedCategory] || 'ä»Šæ—¥æ¨è';
                    document.getElementById('recommendation').textContent = currentFood.recommendation;

                    // æ›´æ–°å¡ç‰‡èƒŒæ™¯
                    result.style.background = backgrounds[selectedBg];

                    // æ˜¾ç¤ºæ“ä½œæŒ‰é’®
                    actions.classList.remove('hidden');
                    actions.classList.add('flex');
                }
            }, 100);
        }

        // ä¸‹è½½å›¾ç‰‡
        function downloadCard() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const nickname = document.getElementById('nickname').value || 'ä»Šå¤©åƒä»€ä¹ˆ';

            canvas.width = 600;
            canvas.height = 500;

            // ç»˜åˆ¶èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, 600, 500);
            if (selectedBg === 0) {
                gradient.addColorStop(0, '#f093fb');
                gradient.addColorStop(1, '#f5576c');
            } else if (selectedBg === 1) {
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
            } else if (selectedBg === 2) {
                gradient.addColorStop(0, '#fa709a');
                gradient.addColorStop(1, '#fee140');
            } else if (selectedBg === 3) {
                gradient.addColorStop(0, '#4facfe');
                gradient.addColorStop(1, '#00f2fe');
            } else if (selectedBg === 4) {
                gradient.addColorStop(0, '#43e97b');
                gradient.addColorStop(1, '#38f9d7');
            } else if (selectedBg === 5) {
                gradient.addColorStop(0, '#fa709a');
                gradient.addColorStop(1, '#f5576c');
            } else if (selectedBg === 6) {
                gradient.addColorStop(0, '#a8edea');
                gradient.addColorStop(1, '#fed6e3');
            } else {
                gradient.addColorStop(0, '#ff9a9e');
                gradient.addColorStop(1, '#fecfef');
            }
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 600, 500);

            // ç»˜åˆ¶åœ†è§’èƒŒæ™¯
            ctx.fillStyle = 'rgba(255,255,255,0.2)';
            roundRect(ctx, 30, 30, 540, 440, 20);
            ctx.fill();

            // ç»˜åˆ¶æ ‡é¢˜
            ctx.fillStyle = 'white';
            ctx.font = 'bold 32px "Noto Sans SC", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ', 300, 70);

            // ç»˜åˆ¶æ˜µç§°
            ctx.font = '20px "Noto Sans SC", sans-serif';
            ctx.fillText(`æ¥è‡ª ${nickname} çš„ä»Šæ—¥æ¨è`, 300, 100);

            // ç»˜åˆ¶ç¾é£Ÿemoji
            ctx.font = '80px serif';
            ctx.fillText(currentFood.emoji, 300, 180);

            // ç»˜åˆ¶ç¾é£Ÿåç§°
            ctx.fillStyle = 'white';
            ctx.font = 'bold 48px "Noto Sans SC", sans-serif';
            ctx.fillText(currentFood.name, 300, 260);

            // ç»˜åˆ¶åˆ†ç±»
            ctx.font = '24px "Noto Sans SC", sans-serif';
            ctx.fillText(categoryNames[selectedCategory] || 'ä»Šæ—¥æ¨è', 300, 300);

            // ç»˜åˆ¶æ¨èè¯­
            ctx.font = '18px "Noto Sans SC", sans-serif';
            ctx.fillText(currentFood.recommendation, 300, 360);

            // ç»˜åˆ¶æ°´å°
            ctx.font = '14px "Noto Sans SC", sans-serif';
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.fillText('ç”¨ auto-tools ç”Ÿæˆ', 300, 440);

            // ä¸‹è½½
            const link = document.createElement('a');
            link.download = 'ä»Šå¤©åƒä»€ä¹ˆ.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        async function copyToClipboard() {
            const nickname = document.getElementById('nickname').value || '';
            const text = `ğŸ½ï¸ ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ

${nickname ? `æ¥è‡ª ${nickname} çš„ä»Šæ—¥æ¨èï¼š` : ''}
${currentFood.emoji} ${currentFood.name}
ğŸ“‚ ${categoryNames[selectedCategory] || 'ä»Šæ—¥æ¨è'}
ğŸ’¡ ${currentFood.recommendation}

ç”¨ auto-tools ç”Ÿæˆ https://luows666.github.io/auto-tools/food-picker.html`;

            try {
                await navigator.clipboard.writeText(text);
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            } catch (err) {
                // å¤‡ç”¨æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }
        }

        // ç»˜åˆ¶åœ†è§’çŸ©å½¢
        function roundRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }
    </script>
</body>
</html>
